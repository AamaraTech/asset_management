"use strict";(self.webpackChunkwm_ui_web_app=self.webpackChunkwm_ui_web_app||[]).push([["default-src_app_sanadi-library_table-filter_table-filter_component_ts"],{1467:(q,T,a)=>{a.d(T,{E:()=>K});var h=a(177),t=a(4438),d=a(9417),p=a(4842),f=a(5779),g=a(1141),u=a(2100),c=a(9903),_=a(5558),y=a(1626);let F=(()=>{class i{constructor(){this.formMap=new Map,this.http=(0,t.WQX)(y.Qq)}getFormConfig(e){return this.http.get(`assets/forms-config/${e}.json`)}constructFormMap(e){e.forEach(n=>{this.getFormConfig(n).subscribe(o=>{let l=new Map;o.forEach(r=>{this.formMap.set(n,l.set(r.name,r))})})})}getFormFields(e){return this.formMap.get(e)}static#t=this.\u0275fac=function(n){return new(n||i)};static#e=this.\u0275prov=t.jDH({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();var x=a(8214),j=a(3993),S=a(5377),k=a(790);let D=(()=>{class i{constructor(){this.showAppSettingsModifier=!1,this.formFields=[],this.translate=(0,t.WQX)(p.c$),this.ref=(0,t.WQX)(u.Pw),this.config=(0,t.WQX)(u.sb),this.formConfig=(0,t.WQX)(F),this.formConfig2=(0,t.WQX)(x.l),this.formObserver=(0,t.WQX)(S.j)}ngOnInit(){this.setAppSettingsFields()}setAppSettingsFields(){const e=this.config.data.form;"function"==typeof e&&(this.formFields=this.config.data.isEditMode?e(this.config.data.config.dropdownOptions,null,!0,this.config.data.item):e(this.config.data.config.dropdownOptions))}getFields(){return this.formFields}onValueChange(e){const n=this.config.data.item;this.config.data.form=e.data,e?.data&&(this.config.data.item={...n,...e.data.data})}onTabChange(e){this.config.data.tabConfig=e}static#t=this.\u0275fac=function(n){return new(n||i)};static#e=this.\u0275cmp=t.VBU({type:i,selectors:[["sanadi-dialog"]],standalone:!0,features:[t.aNF],decls:1,vars:3,consts:[[1,"h-full",3,"onValueChange","onTabChange","isActionNeeded","fields","fullScreen"]],template:function(n,o){1&n&&(t.j41(0,"dynamic-form-builder",0),t.bIt("onValueChange",function(r){return o.onValueChange(r)})("onTabChange",function(r){return o.onTabChange(r)}),t.k0s()),2&n&&t.Y8G("isActionNeeded",!0)("fields",o.getFields())("fullScreen",!1)},dependencies:[j.T,k.$]})}return i})();var b=a(2242);function R(i,s){if(1&i){const e=t.RV6();t.j41(0,"button",5),t.bIt("click",function(){t.eBV(e);const o=t.XpG(2);return t.Njj(o.previousTab())}),t.k0s()}}function B(i,s){if(1&i){const e=t.RV6();t.j41(0,"button",6),t.bIt("click",function(){t.eBV(e);const o=t.XpG(2);return t.Njj(o.nextTab())}),t.k0s()}}function X(i,s){if(1&i&&t.DNE(0,R,1,0,"button",3)(1,B,1,0,"button",4),2&i){const e=t.XpG();t.vxM(0,(null==e.dialogConfig.data||null==e.dialogConfig.data.tabConfig?null:e.dialogConfig.data.tabConfig.index)>0?0:-1),t.R7$(),t.vxM(1,(null==e.dialogConfig.data||null==e.dialogConfig.data.tabConfig?null:e.dialogConfig.data.tabConfig.index)!==(null==e.dialogConfig.data||null==e.dialogConfig.data.tabConfig?null:e.dialogConfig.data.tabConfig.tabsLength)-1?1:-1)}}let I=(()=>{class i{constructor(){this.tabIndex=0,this.dialogRef=(0,t.WQX)(u.Pw),this.dialogConfig=(0,t.WQX)(u.sb)}onSubmit(){this.dialogRef.close(this.dialogConfig.data.item),console.log(this.dialogConfig.data)}nextTab(){dispatchEvent(new CustomEvent("nextTabChange"))}previousTab(){dispatchEvent(new CustomEvent("prevTabChange"))}static#t=this.\u0275fac=function(n){return new(n||i)};static#e=this.\u0275cmp=t.VBU({type:i,selectors:[["sanadi-dialog-footer"]],standalone:!0,features:[t.aNF],decls:7,vars:5,consts:[[1,"flex","flex-row","justify-content-between"],["pButton","","label","Cancel",1,"secondary",3,"click"],["pButton","",1,"primary",3,"click","label","disabled"],["pButton","","label","Previous",1,"primary"],["pButton","","label","Next",1,"primary"],["pButton","","label","Previous",1,"primary",3,"click"],["pButton","","label","Next",1,"primary",3,"click"]],template:function(n,o){1&n&&(t.j41(0,"div",0)(1,"div"),t.DNE(2,X,2,2),t.k0s(),t.j41(3,"div")(4,"button",1),t.bIt("click",function(){return o.dialogRef.close()}),t.k0s(),t.j41(5,"button",2),t.nI1(6,"translate"),t.bIt("click",function(){return o.onSubmit()}),t.k0s()()()),2&n&&(t.R7$(2),t.vxM(2,null!=o.dialogConfig.data&&o.dialogConfig.data.tabConfig?2:-1),t.R7$(3),t.FS9("label",t.bMT(6,3,"save_TC")),t.Y8G("disabled",null==o.dialogConfig.data||null==o.dialogConfig.data.form?null:o.dialogConfig.data.form.isFormValid))},dependencies:[g.tm,g._f,p.h,p.D9]})}return i})();var C=a(7835),M=a(6344),v=a(5144),w=a(4069),$=a(6294),G=a(8191),E=a(1739);const N=(i,s)=>s.label,V=(i,s)=>s.actionType,A=()=>[h.bT,c.rl,p.D9],P=()=>({"min-width":"50rem"});function Q(i,s){if(1&i){const e=t.RV6();t.j41(0,"div",7)(1,"h3"),t.EFF(2),t.nI1(3,"translate"),t.k0s(),t.j41(4,"div",8)(5,"button",9),t.bIt("click",function(){t.eBV(e);const o=t.XpG();return t.Njj(o.show())}),t.k0s(),t.j41(6,"span",10),t.nrm(7,"i",11),t.j41(8,"input",12),t.bIt("input",function(o){t.eBV(e);const l=t.XpG(),r=t.sdS(1);return t.Njj(l.globalSearch(o,r))}),t.k0s()(),t.nrm(9,"button",13)(10,"button",14)(11,"button",15)(12,"button",16)(13,"button",17),t.j41(14,"button",18),t.bIt("click",function(o){t.eBV(e);const l=t.sdS(19);return t.Njj(l.toggle(o))}),t.k0s()(),t.j41(15,"div",19)(16,"button",20),t.bIt("click",function(){t.eBV(e);const o=t.XpG();return t.Njj(o.show())}),t.k0s(),t.j41(17,"button",21),t.bIt("click",function(o){t.eBV(e);const l=t.sdS(19);return t.Njj(l.toggle(o))}),t.k0s()()(),t.nrm(18,"p-menu",22,1)}if(2&i){const e=t.XpG();t.R7$(2),t.SpI(" ",t.bMT(3,3,null==e.config?null:e.config.pageTitle)," "),t.R7$(16),t.Y8G("model",e.items)("popup",!0)}}function W(i,s){if(1&i&&t.nrm(0,"p-columnFilter",25,2),2&i){const e=t.XpG().$implicit;t.Y8G("matchModeOptions",null==e?null:e.matchModeOptions)("field",null==e?null:e.field)}}function O(i,s){if(1&i&&(t.j41(0,"th"),t.EFF(1),t.nI1(2,"translate"),t.DNE(3,W,2,2,"p-columnFilter",24),t.k0s()),2&i){const e=s.$implicit;t.R7$(),t.SpI("",t.bMT(2,2,e.label)," "),t.R7$(2),t.Y8G("ngIf",null==e?null:e.field)}}function L(i,s){if(1&i&&t.Z7z(0,O,4,4,"th",null,N),2&i){const e=t.XpG(2);t.Dyx(null==e.config?null:e.config.tableHeaders)}}function Y(i,s){1&i&&(t.j41(0,"tr")(1,"th",23),t.nrm(2,"p-tableHeaderCheckbox"),t.k0s(),t.DNE(3,L,2,0),t.nv$(4,3,A),t.g25(),t.nrm(6,"th"),t.k0s())}function z(i,s){if(1&i){const e=t.RV6();t.j41(0,"input",32),t.mxI("ngModelChange",function(o){t.eBV(e);const l=t.XpG().$implicit,r=t.XpG().$implicit;return t.DH7(r[l],o)||(r[l]=o),t.Njj(o)}),t.k0s()}if(2&i){const e=t.XpG().$implicit,n=t.XpG().$implicit;t.R50("ngModel",n[e])}}function H(i,s){if(1&i&&(t.EFF(0),t.nI1(1,"translate")),2&i){const e=t.XpG().$implicit,n=t.XpG().$implicit;t.SpI(" ",t.bMT(1,1,n[e])," ")}}function J(i,s){1&i&&(t.j41(0,"td")(1,"p-cellEditor"),t.DNE(2,z,1,1,"ng-template",30)(3,H,2,3,"ng-template",31),t.k0s()())}function U(i,s){if(1&i){const e=t.RV6();t.j41(0,"button",33),t.bIt("click",function(o){const l=t.eBV(e).$implicit,r=t.XpG().$implicit,m=t.XpG();return t.Njj(m.onAction(o,r,l.actionType))}),t.k0s()}2&i&&t.Mz_("icon","pi pi-",s.$implicit.icon,"")}function Z(i,s){if(1&i&&(t.j41(0,"tr",26)(1,"td"),t.nrm(2,"p-tableCheckbox",27),t.k0s(),t.Z7z(3,J,4,0,"td",null,t.fX1),t.j41(5,"td")(6,"div",28),t.Z7z(7,U,1,2,"button",29,V),t.k0s()()()),2&i){const e=s.$implicit,n=t.XpG();t.Y8G("pEditableRow",e),t.R7$(2),t.Y8G("value",e),t.R7$(),t.Dyx(null==n.config?null:n.config.tableBody),t.R7$(4),t.Dyx(n.config.actions)}}let K=(()=>{class i{constructor(){this.dataSource=[],this.formConfig=(0,t.hFB)([]),this.page=1,this.filteredColumns=[],this.loading=!1,this.totalRecords=0,this.apiService=(0,t.WQX)(M.G),this.dialogService=(0,t.WQX)(u.o3),this.messageService=(0,t.WQX)(f.bg),this.confirmationService=(0,t.WQX)(f.td),this.router=(0,t.WQX)($.Ix)}ngOnInit(){this.getApiDataByActivatedRoute(this.getCurrentPage()),this.items=[{label:"Active",icon:"pi pi-refresh",command:()=>{}},{label:"InActive",icon:"pi pi-times",command:()=>{}}]}onAction(e,n,o){"EDIT"===o?this.config.isShowDialog?this.show(n,!0):this.router.navigate([`/${this.config.parentRoute}/edit/${n.id}`],{state:{item:n,config:this.config}}):"DELETE"===o&&this.confirmationService.confirm({target:e.target,message:"Are you sure you want to proceed?",icon:"pi pi-exclamation-triangle",accept:()=>{this.apiService.delete(this.config.url.delete,n.id).pipe((0,_.n)(()=>(this.messageService.add({key:"toaster",severity:"success",summary:"Deleted",detail:"Successfully deleted the record",life:3e3}),this.apiService.get(this.config.url.get,this.getCurrentPage())))).subscribe(l=>{this.totalRecords=l.count,this.dataSource=l.results})},reject:()=>{this.messageService.add({key:"toaster",severity:"error",summary:"Rejected",detail:"You have rejected",life:3e3})}})}show(e,n){this.config.isShowDialog?(this.ref=this.dialogService.open(D,{header:this.config.pageTitle,width:this.config.dialogConfig?this.config.dialogConfig?.width:"100%",height:this.config.dialogConfig?this.config.dialogConfig?.height:"100%",contentStyle:{overflow:"auto"},breakpoints:{"960px":"75vw","640px":"90vw"},dismissableMask:!1,appendTo:"body",maximizable:!0,data:{config:this.config,form:this.formConfig(),item:e,isEditMode:n,...this.config.dialogData},templates:{footer:I}}),this.ref.onClose.subscribe(o=>{o&&this.apiService.post(this.config.url.post,{...o,is_active:!0}).pipe((0,_.n)(()=>this.apiService.get(this.config.url.get,this.getCurrentPage()))).subscribe(l=>{this.totalRecords=l.count,this.dataSource=l.results})})):this.router.navigate([`/${this.config.parentRoute}/new`],{state:{item:e,config:this.config}})}nextPage(e){if(console.log("event",e),this.loading=!0,this.page=e.first/e.rows+1,this.filteredColumns=[],e.filters)for(const[n,o]of Object.entries(e.filters)){const l=o[0];l&&l.value&&this.filteredColumns.push({[`${n}__${l?.matchMode?.toLowerCase()}`]:l.value})}if(this.filteredColumns.length>0){const n=Object.assign({},...this.filteredColumns,{page:this.page});this.apiService.get(this.config.url.get,n).subscribe(o=>{o?.results&&(this.loading=!1,this.totalRecords=o.count,this.dataSource=o.results)})}else{const n=e.globalFilter?{...this.getCurrentPage(),search:e.globalFilter}:this.getCurrentPage();this.getApiDataByActivatedRoute(n)}}globalSearch(e,n){n.filterGlobal(e.target.value),this.page=1}getApiDataByActivatedRoute(e){this.loading=!0,this.apiService.get(this.config.url.get,e).subscribe(n=>{n?.results&&(this.loading=!1,this.totalRecords=n.count,this.dataSource=n.results)})}getCurrentPage(){return{page:this.page}}ngOnDestroy(){this.ref&&this.ref.close()}static#t=this.\u0275fac=function(n){return new(n||i)};static#e=this.\u0275cmp=t.VBU({type:i,selectors:[["sanadi-table-filter"]],inputs:{config:"config",formConfig:[t.Mj6.SignalBased,"formConfig"]},standalone:!0,features:[t.Jv_([u.o3]),t.aNF],decls:6,vars:11,consts:[["dt",""],["menu",""],["filter",""],["currentPageReportTemplate","Showing {first} to {last} of {totalRecords} entries","scrollHeight","calc(100vh - 35vh)","scrollDirection","both",3,"onLazyLoad","value","paginator","rows","showCurrentPageReport","tableStyle","lazy","scrollable","totalRecords","styleClass"],["pTemplate","caption"],["pTemplate","header"],["pTemplate","body"],["snLayout","row","snLayoutAlign","space-between center"],[1,"gap-2","sm:hidden","md:flex","lg:flex","hide-table-filter"],["pButton","","label","New",1,"primary",3,"click"],[1,"p-input-icon-left","ml-auto"],[1,"pi","pi-search"],["pInputText","","type","text","placeholder","Search keyword",3,"input"],["pButton","","label","Active","icon","pi pi-check-circle",1,"p-button-outlined","secondary","md:hidden","lg:flex","xl:flex"],["pButton","","label","Inactive","icon","pi pi-times-circle",1,"p-button-outlined","secondary","md:hidden","lg:flex","xl:flex"],["pButton","","icon","pi pi-filter",1,"p-button-outlined","secondary","md:hidden","lg:flex","xl:flex"],["pButton","","icon","pi pi-upload",1,"p-button-outlined","secondary","md:hidden","lg:flex","xl:flex"],["pButton","","icon","pi pi-video",1,"p-button-outlined","secondary","md:hidden","lg:flex","xl:flex"],["pButton","","icon","pi pi-ellipsis-v",1,"p-button-outlined","secondary","md:flex","lg:hidden","xl:hidden",3,"click"],[1,"flex","gap-2","sm:flex","md:hidden","lg:hidden","xl:hidden","show-table-filter-sm"],["pButton","","icon","pi pi-plus",1,"primary",3,"click"],["pButton","","icon","pi pi-ellipsis-v",1,"p-button-outlined","secondary","p-button-sm",3,"click"],[3,"model","popup"],[2,"width","4rem"],["type","text","display","menu",3,"matchModeOptions","field",4,"ngIf"],["type","text","display","menu",3,"matchModeOptions","field"],[3,"pEditableRow"],[3,"value"],["snLayout","row",1,"flex","align-items-center","justify-content-center","gap-2"],["pButton","","pRipple","","type","button",1,"p-button-sm","p-button-rounded","p-button-text",3,"icon"],["pTemplate","input"],["pTemplate","output"],["pInputText","","type","text",3,"ngModelChange","ngModel"],["pButton","","pRipple","","type","button",1,"p-button-sm","p-button-rounded","p-button-text",3,"click","icon"]],template:function(n,o){if(1&n){const l=t.RV6();t.j41(0,"p-table",3,0),t.bIt("onLazyLoad",function(m){return t.eBV(l),t.Njj(o.nextPage(m))}),t.DNE(2,Q,20,5,"ng-template",4)(3,Y,7,0,"ng-template",5)(4,Z,9,2,"ng-template",6),t.k0s(),t.nrm(5,"p-confirmPopup")}2&n&&t.Y8G("value",o.dataSource)("paginator",!0)("rows",10)("showCurrentPageReport",!0)("tableStyle",t.lJ4(10,P))("lazy",!0)("scrollable",!0)("totalRecords",o.totalRecords)("styleClass","p-datatable-sm")("scrollable",!0)},dependencies:[h.MD,d.X1,d.me,d.BC,d.YN,d.vS,c.bG,c.XI,f.Ei,c.c5,c.S9,c.nA,c.Xk,g.tm,g._f,b.u,b.S,C.H,C.r,p.h,p.D9,w.Y,G.DJ,E.sA,v.Mk,v.W1]})}return i})()}}]);