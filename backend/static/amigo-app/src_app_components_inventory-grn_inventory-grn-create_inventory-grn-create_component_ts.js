"use strict";(self.webpackChunkwm_ui_web_app=self.webpackChunkwm_ui_web_app||[]).push([["src_app_components_inventory-grn_inventory-grn-create_inventory-grn-create_component_ts"],{2198:(R,h,i)=>{i.r(h),i.d(h,{InventoryGrnCreateComponent:()=>P});var e=i(4438),t=i(9417),s=i(4842),m=i(7586),f=i(2637),u=i(1141),c=i(9903),v=i(4945),p=i(9958),n=i(4957),l=i(9673),D=i(8187),g=i(3993),F=i(1004),b=i(4772),M=i(2021),C=i(3492);const E=()=>[C.S];function w(d,y){if(1&d&&e.nrm(0,"dropdown",6),2&d){const o=e.XpG();e.Y8G("form",o.form)("field",o.formFields().purchase_order)}}function z(d,y){if(1&d&&e.nrm(0,"table-field",10),2&d){const o=e.XpG();e.Y8G("form",o.form)("columnSchema",null==o.tableField?null:o.tableField.columnSchema)("field",o.tableField)("formName",null==o.tableField?null:o.tableField.name)("formSchema",null==o.tableField?null:o.tableField.formSchema)("dataSource",null==o.tableField?null:o.tableField.dataSource)("formInitialise",null==o.tableField?null:o.tableField.formInitialise)("dataKey",null==o.tableField?null:o.tableField.dataKey)("scrollHeight",null==o.tableField?null:o.tableField.scrollHeight)("hideButton",null==o.tableField?null:o.tableField.hideButton)("hideFrozenColumn",null==o.tableField?null:o.tableField.hideFrozenColumn)}}let P=(()=>{class d extends D.L{constructor(o){super(o),this.translate=o,this.form=new t.gE({[n.z.grn_no]:new t.MJ,[n.z.grn_date]:new t.MJ(null,{validators:[t.k0.required]}),[n.z.source]:new t.MJ(null,{validators:[t.k0.required]}),[n.z.vendor_bill]:new t.MJ,[n.z.vendor_bill_date]:new t.MJ,[n.z.vendor_address]:new t.MJ,[n.z.vendor]:new t.MJ(null,{validators:[t.k0.required]}),[n.z.other_ref_no]:new t.MJ,[n.z.note]:new t.MJ,[n.z.batch_no]:new t.MJ,[n.z.arrive_date]:new t.MJ,[n.z.exit_date]:new t.MJ,[n.z.vehicle_no]:new t.MJ,[n.z.remarks]:new t.MJ,[n.z.grn_items]:new t.MJ}),this.formFields=(0,e.vPA)(null),this.tabIndex=(0,e.vPA)(null),this.poDropDownData=(0,e.vPA)(null),this.vendorDropDownData=(0,e.vPA)(null),this.sourceDropdownOptions=(0,e.vPA)([{key:"direct",value:"Direct"},{key:"purchase_order",value:"Purchase Order"}]),this.isPoDropDownVisible=(0,e.vPA)(!1),this.inventoryService=(0,e.WQX)(p.c)}ngOnInit(){this.loadGrnFormData()}loadGrnFormData(){this.formFields.set(this.getFormFields()),this.tableField=this.inventoryService.getNewTableData()}saveForm(){this.inventoryService.saveGrn(this.form.value)}cancel(){this.inventoryService.cancel()}sourceDropdownChangeHandler(o,a,r){"purchase_order"===a?(this.form.addControl(n.z.purchase_order,new t.MJ),this.isPoDropDownVisible.set(!0)):(this.form.get(n.z.vendor).enable(),this.isPoDropDownVisible.set(!1),this.form.removeControl(n.z.purchase_order))}vendorDropdownHandler(o,a,r){}poDropdownHandler(o,a,r){const _=this.form.get(n.z.vendor);_.disable();let I=this.inventoryService.poDropDownData()?.find(O=>O.key===a);_.setValue(I.key)}onGrnDateChange(o,a,r){return r.grn_date=m(r?.grn_date).format("YYYY-MM-DD"),r}onVendorBillDateChange(o,a,r){return r.vendor_bill_date=m(r?.vendor_bill_date).format("YYYY-MM-DD"),r}getFormFields(){return{[n.z.grn_no]:this.getInputField(n.z.grn_no,new l.$),[n.z.source]:this.getDropDownField(n.z.source,new l.$,this.sourceDropdownChangeHandler.bind(this),this.sourceDropdownOptions),[n.z.purchase_order]:this.getDropDownField(n.z.purchase_order,new l.$,this.poDropdownHandler.bind(this),this.inventoryService.poDropDownData),[n.z.grn_date]:this.getDateField(n.z.grn_date,new l.$,this.onGrnDateChange.bind(this)),[n.z.vendor]:this.getDropDownField(n.z.vendor,new l.$,this.vendorDropdownHandler.bind(this),this.inventoryService.vendorDropDownData),[n.z.vendor_bill]:this.getInputField(n.z.vendor_bill,new l.$),[n.z.vendor_bill_date]:this.getDateField(n.z.vendor_bill_date,new l.$,this.onVendorBillDateChange.bind(this)),[n.z.vendor_address]:this.getInputField(n.z.vendor_address,new l.$),[n.z.other_ref_no]:this.getInputField(n.z.other_ref_no,new l.$),[n.z.batch_no]:this.getInputField(n.z.batch_no,new l.$),[n.z.note]:this.getInputField(n.z.note,new l.$),[n.z.vehicle_no]:this.getInputField(n.z.vehicle_no,new l.$),[n.z.arrive_date]:this.getDateField(n.z.arrive_date,new l.$,this.onVendorBillDateChange.bind(this)),[n.z.exit_date]:this.getDateField(n.z.exit_date,new l.$,this.onVendorBillDateChange.bind(this)),[n.z.remarks]:this.getInputField(n.z.remarks,new l.$)}}static#e=this.\u0275fac=function(a){return new(a||d)(e.rXU(s.c$))};static#n=this.\u0275cmp=e.VBU({type:d,selectors:[["sanadi-inventory-grn-create"]],standalone:!0,features:[e.Jv_([p.c]),e.Vt3,e.aNF],decls:44,vars:43,consts:[[3,"formGroup"],[1,"h-full","flex","flex-column","px-3","justify-content-between"],[3,"header"],[3,"activeIndex"],[1,"flex","flex-column","gap-3"],[1,"flex","flex-row","justify-content-between","gap-3"],[1,"flex-grow-1",3,"form","field"],[1,"flex","flex-row","justify-content-between","py-5"],["pButton","","label","Cancel",1,"secondary",3,"click"],["pButton","","label","Save",1,"primary",3,"click"],[3,"form","columnSchema","field","formName","formSchema","dataSource","formInitialise","dataKey","scrollHeight","hideButton","hideFrozenColumn"]],template:function(a,r){1&a&&(e.j41(0,"form",0)(1,"div",1)(2,"div")(3,"p-tabView")(4,"p-tabPanel",2),e.nI1(5,"translate"),e.j41(6,"div")(7,"p-accordion",3)(8,"p-accordionTab",2),e.nI1(9,"translate"),e.j41(10,"div",4)(11,"div",5),e.nrm(12,"sanadi-input",6)(13,"date",6)(14,"dropdown",6),e.DNE(15,w,1,2,"dropdown",6),e.k0s(),e.j41(16,"div",5),e.nrm(17,"dropdown",6)(18,"sanadi-input",6)(19,"date",6)(20,"sanadi-input",6),e.k0s(),e.j41(21,"div",5),e.nrm(22,"sanadi-input",6)(23,"sanadi-input",6)(24,"sanadi-input",6),e.k0s()()(),e.j41(25,"p-accordionTab",2),e.nI1(26,"translate"),e.j41(27,"div",4)(28,"div",5),e.nrm(29,"sanadi-input",6)(30,"sanadi-input",6)(31,"sanadi-input",6)(32,"sanadi-input",6),e.k0s()()()()()(),e.j41(33,"p-tabPanel",2),e.nI1(34,"translate"),e.j41(35,"div"),e.DNE(36,z,1,11),e.nv$(37,36,E),e.g25(),e.k0s()()()(),e.j41(39,"div",7),e.nrm(40,"div"),e.j41(41,"div")(42,"button",8),e.bIt("click",function(){return r.cancel()}),e.k0s(),e.j41(43,"button",9),e.bIt("click",function(){return r.saveForm()}),e.k0s()()()()()),2&a&&(e.Y8G("formGroup",r.form),e.R7$(4),e.FS9("header",e.bMT(5,35,"grn_details_TC")),e.R7$(3),e.Y8G("activeIndex",0),e.R7$(),e.FS9("header",e.bMT(9,37,"grn_Info_TC")),e.R7$(4),e.Y8G("form",r.form)("field",r.formFields().grn_no),e.R7$(),e.Y8G("form",r.form)("field",r.formFields().grn_date),e.R7$(),e.Y8G("form",r.form)("field",r.formFields().source),e.R7$(),e.vxM(15,r.isPoDropDownVisible()?15:-1),e.R7$(2),e.Y8G("form",r.form)("field",r.formFields().vendor),e.R7$(),e.Y8G("form",r.form)("field",r.formFields().vendor_bill),e.R7$(),e.Y8G("form",r.form)("field",r.formFields().vendor_bill_date),e.R7$(),e.Y8G("form",r.form)("field",r.formFields().vendor_address),e.R7$(2),e.Y8G("form",r.form)("field",r.formFields().other_ref_no),e.R7$(),e.Y8G("form",r.form)("field",r.formFields().batch_no),e.R7$(),e.Y8G("form",r.form)("field",r.formFields().note),e.R7$(),e.FS9("header",e.bMT(26,39,"vehicle_details_TC")),e.R7$(4),e.Y8G("form",r.form)("field",r.formFields().vehicle_no),e.R7$(),e.Y8G("form",r.form)("field",r.formFields().arrive_date),e.R7$(),e.Y8G("form",r.form)("field",r.formFields().exit_date),e.R7$(),e.Y8G("form",r.form)("field",r.formFields().remarks),e.R7$(),e.FS9("header",e.bMT(34,41,"addProducts_TC")))},dependencies:[g.T,F.P,b.S,M.g,u.tm,u._f,c.bG,v.fd,v.JQ,v.Kp,f.h6,f.nD,f.gV,t.X1,t.qT,t.cb,t.j4,t.YN,s.h,s.D9]})}return d})()}}]);